[[section-concepts]]
== Cross-cutting Concepts

//8.1
=== Domain Concepts
The following Entity-Relationship Diagram represents the domain of the application:

image:domain-model.png[domain model]

.Entities' definitions
|===
| *Entity* | *Description*
| User | The person using the application
| Friend | Person(s) tagged as 'knows' in the POD.
| Contact | Friend(s) that the user wants to chat with.
| Message | String, link, video or audio.
| Chat | "Storage" of messages between two persons.
| Group Chat | Chat but for two or more persons.
|===

.Relations' definitions
|===
| *Relation* | *Description*
| User-Has-Friend | Two users have to be friends in order to chat together. If you have no friends, you can't chat, but you can use the app.
| Friend-Can_be-Contact | Once users are friends, they can be chosen to chat with.
| User-sends-Message | Users share the amount of messages they want, may choose to only receive.
| Message-Is_sent_to-Contact | Messages can't be sent to more than one contact unless the message is sent to a group chat.
| Message-Is_stored_in-Chat | The record of messages you send is stored with a chat tag in your POD. The links to messages sent to you too.
| Chat-Can_be-Group Chat | In case a chat with 2 or more people is made, it is considered a Group Chat.
|===

//8.2
=== User Experience Concepts

==== User interface

DeChat has a web interface with a side-menu that allows users to view their chats with friends (including groups) and contacts list. These two can be searched for specific results using the magnifying glass button. The side menu also has a button to change the chat settings and a button to create new group chats. The application also has a chat view to read and write messages to other users.

image::https://github.com/Arquisoft/dechat_en3b/blob/master/src/docs/res/user-interface.png?raw=true[user interface]

It's a Single Page Application written in JavaScript using Angular JS.

//Should we comment by components of the interface?

==== Internationalization (i18n)
Initially we had planned to internationalize the user interface of the application, but we ended up short of time so we did not do it. Nevertheless, there are no components other than strings, so the development process should be fairly easy.


//8.3
=== Safety & Security Concepts

==== Safety
The parts of the system that have life endangering aspects inherit from the bases of P2P computing. In case someone tried to reach dangerous goals with DeChat, we can't respond for the misuse of the software.

==== Security
.Credentials
The security of the user credentials depends on the user's pc and web browser, and in the strength of the Solid session manager.

.User Data
In a P2P system, the only data leak that could be made depends on the human factor of sharing something unintentionally.

//8.4
=== Architecture & Design Patterns

.Model-View-Controller
The user interface is based in Angular, and the work methodology of Angular is based on this pattern.

//8.5
=== Under-the-hood

==== Persistency
All user data is stored in their POD through the solid-file-client library.

==== Transaction Handling
    -Transaction 1: write in the interface -> write in the pod -> write in the target pod -> show in the target interface (?)
    -There is no rollback or protection from disasters implemented

==== Session Handling
    -Solid session manager?

==== Communication & Integration

==== Exception & Error Handling

==== Business rules

==== Batch

==== Reporting
Bugs, ideas, recommendations and anything else can be made through the https://github.com/Arquisoft/dechat_en3b/issues[issues page] of the GitHub project, following the https://help.github.com/en/articles/creating-an-issue[standards for opening an issue].


//8.6
=== Development Concepts

==== Build, Test, Deploy
    -Software needed
    -Steps for each part

==== Migration ()

==== Configurability

//8.7
=== Operational Concepts

==== Administration
    -Makes no sense in P2P connections
    -Privacy but also can proliferate illegal stuff

==== Management

==== Disaster-Recovery

.User Data
The data of the application is stored in servers independent from the app, so the responsibility of making backups from the PODs from time to time resides in the server's managers. Users can make backups of their PODs into their PCs whenever they want. If your Solid POD server falls, there are more to work with, so even if you lose your information you can use the app from other server.

.Application
The recovery is dependant of GitHub. If anything happens to their servers the application would be down until they manage the disaster.

==== Scalability

==== High Availability
    -Once a new version is made, the deployment may take or not time, but for the user once it is uploaded it should not make any difference (refresh page?)
    -As long as github and a solid server works, you can use the app

//Discarded:
// === Ergonomics (?)
// === Code Generation (included in Build, Test, Deploy)
// === Parallelization / Threading (We don't work with this)
// === Clustering (Is the opposite of what we want?)
// ==== Process Control (?)